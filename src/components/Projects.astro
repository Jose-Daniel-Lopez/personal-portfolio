---
import GitHub from "./icons/GitHub.astro";
import NextJS from "./icons/NextJS.astro";
import Tailwind from "./icons/Tailwind.astro";
import Link from "./icons/Link.astro";
import Code from "./icons/Code.astro";
import Vue from "./icons/Vue.astro";
import Spring from "./icons/Spring.astro";
import Bootstrap from "./icons/Bootstrap.astro";
import TypeScript from "./icons/TypeScript.astro";
import PostgreSQL from "./icons/PostgreSQL.astro";
import Java from "./icons/Java.astro";
import AstroIcon from "./icons/AstroIcon.astro";
import Mongo from "./icons/Mongo.astro";

const TAGS = {
  NEXT: {
    name: "Next.js",
    class: "bg-black text-white",
    icon: NextJS,
  },
  MONGODB: {
    name: "MongoDB",
    class: "bg-[#4DB33D] text-white",
    icon: Mongo,
  },
  SPRING: {
    name: "Spring Boot",
    class: "bg-[#5EA23A] text-white",
    icon: Spring,
  },
  ASTRO: {
    name: "Astro",
    class: "bg-[#FF5D01] text-white",
    icon: AstroIcon,
  },
  BOOTSTRAP: {
    name: "Bootstrap",
    class: "bg-[#af6efa] text-white",
    icon: Bootstrap,
  },
  VUE: {
    name: "Vue.js",
    class: "bg-[#41B883] text-white",
    icon: Vue,
  },
  TYPESCRIPT: {
    name: "TypeScript",
    class: "bg-[#3178C6] text-white",
    icon: TypeScript,
  },
  JAVA: {
    name: "Java",
    class: "bg-[#004b96] text-white",
    icon: Java,
  },
  TAILWIND: {
    name: "Tailwind CSS",
    class: "bg-[#003159] text-white",
    icon: Tailwind,
  },
  POSTGRESQL: {
    name: "PostgreSQL",
    class: "bg-[#336791] text-white",
    icon: PostgreSQL,
  },
};

interface ProjectTag {
  name: string;
  class: string;
  icon: any;
}

interface Project {
  title: string;
  description: string;
  tags: ProjectTag[];
  link?: string;
  github?: string;
  image?: string;
}

const PROJECTS: Project[] = [
  {
    title: "Web Socket Chat",
    description:
      "Aplicaci贸n de chat en tiempo real con Spring Boot y WebSocket. Thymeleaf como gestor de plantillas.",
    link: "https://tab-to-dev.click/jose-chatapp/",
    github:
      "https://github.com/Jose-Daniel-Lopez/SpringBoot-RealTimeChat-WebApplication",
    image: "/jose-portfolio/projects/real_time_chat.webp",
    tags: [TAGS.SPRING, TAGS.JAVA, TAGS.BOOTSTRAP],
  },
  {
    title: "Tejon Tech - Spring + Vue.js",
    description:
      "E-commerce centrado en el sector tecnol贸gico. Desarrollado con Spring y Vue.js.",
    link: "https://tab-to-dev.click/tejon-tech/",
    github: "https://github.com/Jose-Daniel-Lopez/E-Commerce-Frontend",
    image: "/jose-portfolio/projects/tejontech.webp",
    tags: [
      TAGS.SPRING,
      TAGS.TAILWIND,
      TAGS.VUE,
      TAGS.TYPESCRIPT,
      TAGS.POSTGRESQL,
      TAGS.JAVA,
    ],
  },
  {
    title: "Neo Url - Spring + Astro",
    description: "Acortador de URLs desarrollado con Spring Boot y Astro.",
    link: "https://tab-to-dev.click/neourl/",
    github: "https://github.com/Jose-Daniel-Lopez/tiny-url-frontend",
    image: "/jose-portfolio/projects/neo-url.webp",
    tags: [
      TAGS.SPRING,
      TAGS.TAILWIND,
      TAGS.ASTRO,
      TAGS.TYPESCRIPT,
      TAGS.MONGODB,
      TAGS.JAVA,
    ],
  },
];
---

<!-- Terminal Window Top Bar -->
<div class="flex mb-2 items-center gap-1 w-fit select-none">
  <span class="w-3 h-3 rounded-full bg-red-500"></span>
  <span class="w-3 h-3 rounded-full bg-yellow-500"></span>
  <span class="w-3 h-3 rounded-full bg-green-500"></span>
</div>

<!-- ASCII Box for Projects -->
<div
  class="font-mono text-sm leading-tight max-w-4xl mx-auto p-4"
  style="--box-border-color: var(--background2); --box-border-width: 1px; background-color: var(--background1);"
>
  <div class="flex items-center gap-2 mb-4">
    <Code class="size-6 block shrink-0" />
    <h2 is-="h3">Mis Proyectos</h2>
  </div>

  {
    PROJECTS.map((project) => (
      <div
        box-="square"
        class="relative mb-6 p-4 bg-[var(--background1)] border flex-col items-center text-center"
        style={`border-color: var(--box-border-color); border-width: var(--box-border-width);`}
        aria-label={`Project: ${project.title}`}
      >
        {/* Project Title */}
        <h3 class="text-green-400 font-bold mb-2">
          <span class="nf nf-fa-folder_open" /> {project.title}
        </h3>

        {/* Project Media with hover description */}
        {project.image && (
          <div class="group relative overflow-hidden rounded-lg">
            <img
              src={project.image}
              alt={`Thumbnail for ${project.title}`}
              class="w-full max-w-lg mx-auto rounded-lg shadow-lg object-cover transition-transform duration-300 ease-in-out group-hover:scale-105 group-hover:shadow-2xl"
              style="aspect-ratio: 16/9;"
              loading="lazy"
            />
            <div class="absolute inset-0 flex items-center justify-center bg-black/70 opacity-0 transition-opacity duration-300 group-hover:opacity-100 p-4 text-center">
              <p class="text-gray-200 text-sm leading-relaxed">
                {project.description}
              </p>
            </div>
          </div>
        )}

        {/* Tech Stack Tags */}
        <div class="flex flex-wrap gap-2 mb-6 justify-center">
          {project.tags.map((tag) => (
            <span
              class={`inline-flex items-center gap-x-2 px-2 py-1 text-sm font-bold shadow-md border border-cyan-400 transition-all duration-200 ${tag.class}`}
              style="box-shadow: 0 2px 8px rgba(34,211,238,0.15);"
              onmouseover="this.style.boxShadow='0 0 12px 2px rgba(34,211,238,0.35)'; this.style.transform='scale(1.08)';"
              onmouseout="this.style.boxShadow='0 2px 8px rgba(34,211,238,0.15)'; this.style.transform='scale(1)';"
            >
              <tag.icon class="size-4 block" />
              {tag.name}
              <Code class="size-4 ml-1 block" />
            </span>
          ))}
        </div>

        {/* CLI Command Buttons */}
        <div class="flex flex-wrap gap-2 mt-2 justify-center mb-3">
          {project.github && (
            <a
              href={project.github}
              is-="button"
              tone-="primary"
              size-="sm"
              aria-label="Ver c贸digo en GitHub"
              class="inline-flex items-center gap-1 px-2 py-1"
            >
              <GitHub class="size-4 block shrink-0" />
              <span class="leading-none align-middle">c贸digo</span>
            </a>
          )}
          {project.link && (
            <a
              href={project.link}
              is-="button"
              tone-="info"
              size-="sm"
              aria-label="Ver demo"
              class="inline-flex items-center gap-1 px-2 py-3"
            >
              <Link class="size-4 block shrink-0" />
              <span class="leading-none align-middle">vista previa</span>
            </a>
          )}
        </div>
      </div>
    ))
  }
</div>
